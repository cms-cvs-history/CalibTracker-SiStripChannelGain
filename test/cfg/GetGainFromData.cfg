process Demo =  {

source = PoolSource 
{ 
      untracked vstring fileNames = {
	"file:../../../../cfg_MinBias/MinBias.root"
#	'/store/relval/2008/4/14/RelVal-RelValMinBias-1207860742-2nd-04/0000/8071F854-690A-DD11-B0F7-000423D99996.root',
#	'/store/relval/2008/4/14/RelVal-RelValMinBias-1207860742-2nd-04/0000/82C36E18-7C0A-DD11-B2CA-000423D6B358.root'
      }

/*
      untracked vstring fileNames = {
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_00.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_01.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_02.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_03.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_04.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_05.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_06.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_07.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_08.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_09.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_10.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_11.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_12.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_13.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_14.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_15.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_16.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_17.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_18.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_19.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_20.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_21.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_22.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_23.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_24.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_25.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_26.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_27.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_28.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_29.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_30.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_31.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_32.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_33.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_34.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_35.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_36.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_37.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_38.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_39.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_40.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_41.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_42.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_43.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_44.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_45.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_46.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_47.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_48.root",
        "file:/storage/data/cms/users/quertenmont/MinBias/MinBias_175_SIM-DIGI-RECO_10K_49.root"
      }
*/

}
untracked PSet maxEvents = {untracked int32 input = 1000} #Max = ~50000

include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

include "CalibTracker/Configuration/data/SiPixelLorentzAngle/SiPixelLorentzAngle_Fake.cff"
include "CalibTracker/Configuration/data/SiStripLorentzAngle/SiStripLorentzAngle_Fake.cff"
include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
replace TrackRefitter.TrajectoryInEvent = true

include "RecoTracker/DeDx/data/dedxHitsFromRefitter.cfi"

module SiStripCalib = SiStripGainFromData { 
               string   OutputHistos         = "Histos_500K.root"
               string   OutputGains          = "Histos_500K_Gains.txt"

                string   TrackProducer       = "ctfWithMaterialTracks"
                string   TrackLabel          = ""
                string   TrajToTrackProducer = "TrackRefitter"
                string   TrajToTrackLabel    = ""

      untracked double   minTrackMomentum    = 1
      untracked uint32   minNrEntries        = 100
      untracked double   maxChi2OverNDF      = 9999999
      untracked double   maxMPVError         = 1000000
      untracked uint32   maxNrStrips         = 6

        bool SinceAppendMode      = true
        string IOVMode            = "Job"
        string Record             = "SiStripApvGainRcd"
        bool doStoreOnDB          = true
}

service = PoolDBOutputService{
   string connect = "sqlite_file:MyTest_DB.db"
   untracked string timetype = "runnumber"    
 #string timetype = "timestamp"    

  untracked string BlobStreamerName="TBufferBlobStreamingService"
  PSet DBParameters = {
     untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
     untracked int32 messageLevel=2
  }

  VPSet toPut={ { string record = "SiStripApvGainRcd"   string tag ="MyTest"} }    
}

path p = {TrackRefitter, SiStripCalib} 


}
