
process ICALIB = {
    
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet insert_logfile = { untracked string threshold = "INFO" }
    }

    source = EmptyIOVSource {
	string timetype = "runnumber"
        untracked uint32 firstRun = 100
	untracked uint32 lastRun = 100
        uint32 interval = 1
    }
    untracked PSet maxEvents = {untracked int32 input = 1}
  
    ############ Access to ORCOFF via Frontier ############
    es_source = PoolDBESSource {
	VPSet toGet = {
	    { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_TIF_v1"}
	}

	#string connect = "oracle://cms_orcoff/CMS_COND_STRIP" 
	#untracked string catalog = "relationalcatalog_oracle://cms_orcoff/CMS_COND_GENERAL"
   
	untracked bool siteLocalConfig = true
	string connect = "frontier://Frontier/CMS_COND_STRIP"
	
	string timetype = "runnumber"

	PSet DBParameters ={
	#    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	    untracked string authenticationPath = ""
	    untracked bool loadBlobStreamer = true
	}
    }

    es_module sistripconn = SiStripConnectivity {}


    service = PoolDBOutputService{
	#	string connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP" 
	#	untracked string catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"

	string connect = "sqlite_file:testdbfile.db"    
    	untracked string catalog = "file:testdbcatalog.xml"

	string timetype = "runnumber"    
#	string timetype = "timestamp"    
	PSet DBParameters = {
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	    untracked int32 messageLevel=2
	    untracked bool loadBlobStreamer = true
	}
	
        VPSet toPut={ { string record = "SiStripApvGainRcd"   string tag ="TIF_GAIN_TickMark_ASCII"} }    
    }
        
#gain            

 module gain =  SiStripGainFromAsciiFile {

	string           InputFileName      = "tickmarks_dump_run_6094.txt"
	untracked bool   printDebug         = true

        double referenceValue = 640

	bool SinceAppendMode = true
	string IOVMode	     = "Run"
	string Record        = "SiStripApvGainRcd"
	bool doStoreOnDB     = true
    }


    path p = { gain }
        
    module print = AsciiOutputModule {}
    endpath ep = { print }
}

