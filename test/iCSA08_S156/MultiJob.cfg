      
process MULTI =  {

source = PoolSource 
{ 
      untracked vstring fileNames = {
      }
#      untracked uint32 skipEvents = XXX_SKIPEVENT_XXX
}
include "CalibTracker/SiStripChannelGain/test/iCSA08_S156_APV/XXX_INPUT_XXX"
untracked PSet maxEvents = {untracked int32 input = XXX_NEVENTS_XXX}

include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"


service = MessageLogger{
  untracked vstring destinations    = { "cout" }
  untracked PSet    cout            = { untracked string threshold = "ERROR" }
  untracked vstring suppressDebug   = { "TrackRefitter", "FwkReport" }
  untracked vstring suppressInfo    = { "TrackRefitter", "FwkReport" }
  untracked vstring suppressWarning = { "TrackRefitter", "FwkReport" }
} 


include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
replace GlobalTag.globaltag = "1PB_V2_RECO::All"


include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
replace TrackRefitter.src               = ALCARECOSiStripCalMinBias
replace TrackRefitter.TrajectoryInEvent = true

module SiStripCalib = SiStripGainFromData { 
                string   AlgoMode            = "MultiJob"

               string   OutputHistos         = "XXX_OUTPUT_XXX"
               string   OutputGains          = "XXX_OUTPUT_XXX.txt"

                string   TrajToTrackProducer = "TrackRefitter"
                string   TrajToTrackLabel    = ""

      untracked double   minTrackMomentum    = 1
      untracked uint32   minNrEntries        = 100
      untracked double   maxChi2OverNDF      = 9999999
      untracked double   maxMPVError         = 1000000
      untracked uint32   maxNrStrips         = 8

        bool SinceAppendMode      = true
        string IOVMode            = "Job"
        string Record             = "SiStripApvGainRcd"
        bool doStoreOnDB          = false
}

#module OUT = PoolOutputModule 
#{ 
#     untracked string fileName = "XXX_OUTPUT_XXX_out.root"
#}


path p = {TrackRefitter, SiStripCalib} 
#endpath outpath = {OUT}
#schedule = {p,outpath}


}
