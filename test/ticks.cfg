
process ICALIB = {

#    source = EmptyIOVSource {
#        string timetype = "runnumber"
#        untracked uint32 firstRun = 1
#	untracked uint32 lastRun = 1
#        uint32 interval = 1
#    }
#
#    source = EmptySource {
#	untracked int32 maxEvents = 1
#	untracked uint32 firstRun = 1 
#	untracked uint32 numberEventsInRun = 1
#    }
 
  ############ File Input ############
  source = PoolSource {
    untracked vstring fileNames =  {



    }

    untracked int32 maxEvents = -1
    untracked uint32 debugVebosity = 1
    untracked bool   debugFlag     = true
  }

  ############ Access to ORCOFF via Frontier ############
  es_source = PoolDBESSource {
    VPSet toGet = {
      { string record = "SiStripPedestalsRcd" string tag = "SiStripPedNoise_TIF_140_test1"},
      { string record = "SiStripNoisesRcd" string tag = "SiStripPedNoise_TIF_140_test1"},
      { string record = "SiStripFedCablingRcd" string tag = "SiStripFedCabling_TIF_140_test1"}
    }
   
    #
    string connect = "frontier://cms_conditions_data/CMS_COND_STRIP"
    string timetype = "runnumber"

   PSet DBParameters ={
      untracked string authenticationPath = ""
      untracked string BlobStreamerName="DefaultBlobStreamingService"
   }
  }

  es_module sistripconn = SiStripConnectivity {}




   
    service = MessageLogger {
	untracked vstring destinations = { "logfile.txt" }
	untracked PSet insert_logfile = { untracked string threshold = "INFO" }
    }
    


#    include "IORawData/SiStripInputSources/data/ExampleRUFile.cff"
#    replace TBRUInputSource.fileNames = { "file:/afs/cern.ch/cms/cmt/onlinedev/data/examples/RU0030349_000.root" }
#    replace maxEvents.input = 10
 
   
    include "EventFilter/SiStripRawToDigi/data/FedChannelDigis.cfi"    
    include "DQM/SiStripCommon/data/DaqMonitorROOTBackEnd.cfi"
    include "DQM/SiStripCommissioningSources/data/CommissioningHistos.cfi"
    
#    include "DQM/SiStripCommon/data/PoolOutputSafe.cfi"




 service = PoolDBOutputService{
#	string connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP" 
#       string connect = "file://cms_orcoff_int2r/CMS_COND_STRIP" 
#	#

	string connect = "sqlite_file:dbfile"    
    	#


	string timetype = "runnumber"    
#	string timetype = "timestamp"    
	PSet DBParameters = {
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	    untracked int32 messageLevel=2
	    untracked string BlobStreamerName="DefaultBlobStreamingService"
	}
	
        VPSet toPut={ { string record = "SiStripApvGainRcd"   string tag ="TIF_GAIN_TickMark"} }    
    }
        
#gain            

 module prod =  SiStripGainTickMarkCalculator {


	        untracked string HistoFile = output.root
                untracked bool   printDebug = true

		bool SinceAppendMode = true
		string IOVMode	     = "Run"
		string Record        = "SiStripApvGainRcd"
		bool doStoreOnDB     = false

               }




       path p = { FedChannelDigis, CommissioningHistos, prod }
        
       module print = AsciiOutputModule {}
       endpath ep = { print }
}

